<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voz Keyword Processing</title>
    <style>
        body {
            font-family: Arial, sans-serif;
        }
        #outputFrame {
            width: 100%;
            height: 500px;
            border: 1px solid #ccc;
        }
    </style>
    <script>
        function insertSeparator(word) {
            return [...word].join('឴');
        }

        function processText() {
            let inputText = document.getElementById("inputText").value;
            let outputText = document.getElementById("outputText");

            // Remove URLs from both input and output
            const urlRegex = /https?:\/\/[^\s]+/g;
            inputText = inputText.replace(urlRegex, '');
            outputText.value = inputText;

            let str = inputText;

            // Find words containing 'bca' and replace 'bca' with '***'
            const wordRegex = /\b\w*bca\w*\b/gi;
            str = str.replace(wordRegex, function(match) {
                return match.replace(/bca/gi, 'b឴ca');
            });

            const kws = [
                'công an',
                'Công an',
                'Công An',
                'CÔNG AN',
                'quân đội',
                'Quân đội',
                'Quân Đội',
                'QUÂN ĐỘI',
                'thủ tướng',
                'Thủ tướng',
                'Thủ Tướng',
                'THỦ TƯỚNG',
                'hiếp dâm',
                'Hiếp dâm',
                'Hiếp Dâm',
                'HIẾP DÂM',
                // add more keywords here
            ];
            for (let kw of kws) {
                let repl = insertSeparator(kw);
                // replace all occurrences of kw with repl with exact match
                const kwRegex = new RegExp(kw, 'g');
                str = str.replace(kwRegex, repl);
            }

            outputText.value = str;
        }

        function copyOutput() {
            // Get the content from the iframe
            var outputContent = document.getElementById("outputFrame").contentDocument.body.innerHTML;

            // Set the content to the output textarea
            document.getElementById("outputText").value = outputContent;

            // Copy the content to the clipboard
            document.getElementById("outputText").select();
            document.execCommand("copy");
        }
    </script>
</head>
<body>
    <h1>Website Renderer</h1>
    <label for="inputText">Enter HTML content:</label>
    <div id="inputText" contenteditable="true" style="border: 1px solid #ccc; padding: 5px;" oninput="processText()"></div>
    <br>
    <label for="outputText">Output:</label>
    <div id="outputText" contenteditable="true" style="border: 1px solid #ccc; padding: 5px;" oninput="processText()" onclick="copyOutput()"></div>
    <div class="btn-container">
        <button class="copy-btn" onclick="copyOutput()">Copy</button>
    </div>
    <iframe id="outputFrame"></iframe>
</body>
</html>
